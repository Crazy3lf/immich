-- NOTE: This file is auto generated by ./sql-generator

-- GroupUserRepository.getAll
select
  (
    select
      to_json(obj)
    from
      (
        select
          "user2"."id",
          "user2"."name",
          "user2"."email",
          "user2"."avatarColor",
          "user2"."profileImagePath",
          "user2"."profileChangedAt"
        from
          "user" as "user2"
        where
          "user2"."id" = "group_user"."userId"
      ) as obj
  ) as "user",
  "group_user"."createdAt",
  "group_user"."updatedAt"
from
  "group_user"
  inner join "user" on "group_user"."userId" = "user"."id"
where
  "groupId" = $1
order by
  "user"."name"

-- GroupUserRepository.createAll
insert into
  "group_user" ("userId", "groupId")
values
  ($1, $2)
on conflict do nothing
returning
  "createdAt",
  "updatedAt",
  (
    select
      to_json(obj)
    from
      (
        select
          "user2"."id",
          "user2"."name",
          "user2"."email",
          "user2"."avatarColor",
          "user2"."profileImagePath",
          "user2"."profileChangedAt"
        from
          "user" as "user2"
        where
          "group_user"."userId" = "user2"."id"
      ) as obj
  ) as "user"

-- GroupUserRepository.deleteAll
delete from "group_user"
where
  "groupId" = $1
  and "userId" in ($2)
